<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>POAS & Scaling Calculator â€” eCommerce</title>
  <style>
    :root{
      --bg:#0f1724;--muted:#9aa6bf;--accent:#7dd3fc;--text:#e6eef8;
      --green:#16a34a;--yellow:#facc15;--blue:#3b82f6;--violet:#a78bfa;--red:#ef4444;--label-strong:#ffffff;
      --block-bg:rgba(255,255,255,0.06);--panel-bg:rgba(15,23,36,0.85);--panel-border:1px solid rgba(255,255,255,0.08);
    }
    body[data-theme="light"]{
      --bg:#f4f7fb;--muted:#5b6473;--accent:#0369a1;--text:#0b1220;
      --green:#15803d;--yellow:#ca8a04;--blue:#2563eb;--violet:#7c3aed;--red:#dc2626;--label-strong:#0b1220;
      --block-bg:rgba(0,0,0,0.04);--panel-bg:rgba(255,255,255,0.9);--panel-border:1px solid rgba(0,0,0,0.08);
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;margin:0;width:100%}
    body{font-family:Inter, ui-sans-serif, system-ui;color:var(--text);background:linear-gradient(180deg,var(--bg) 0%, var(--bg) 100%);}    
    .wrap{width:100%;margin:0;padding:20px;position:relative}
    h1{text-align:center;font-size:22px;margin-bottom:16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;width:100%}
    .panel{padding:20px;border:var(--panel-border);border-radius:16px;background:var(--panel-bg);box-shadow:0 8px 20px rgba(0,0,0,0.25)}
    label{display:block;font-size:13px;color:var(--text);margin-bottom:4px}
    input[type=number]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.2);background:rgba(255,255,255,0.08);color:var(--text);font-size:14px}
    .row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
    .row > *{flex:1;min-width:140px}
    .btn{background:#0ea5e9;color:#021026;padding:10px 12px;border-radius:9px;border:0;cursor:pointer;font-weight:600;width:100%;margin-top:8px}
    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:12px}
    .kpi > .item-block:nth-child(4n){grid-column:1/-1}
    .item-block{background:var(--block-bg);padding:12px;border-radius:10px;text-align:center}
    .muted{color:var(--muted);font-size:13px}
    .green{color:var(--green);font-weight:700;font-size:18px}
    .yellow{color:var(--yellow);font-weight:700;font-size:18px}
    .blue{color:var(--blue);font-weight:700;font-size:18px}
    .violet{color:var(--violet);font-weight:700;font-size:18px}
    .red{color:var(--red);font-weight:700;font-size:18px}
    .white-bold{color:var(--label-strong);font-weight:700;font-size:13px}
    h3,h4{margin-top:0;margin-bottom:8px;color:var(--accent)}
    footer{margin-top:14px;color:var(--muted);font-size:12px;line-height:1.4}
    @media(max-width:1100px){.grid{grid-template-columns:1fr}.wrap{padding:12px}}
    .theme-toggle{position:absolute;right:8px;top:8px;background:transparent;border:1px solid rgba(2,6,23,0.2);padding:6px 10px;border-radius:8px;color:var(--text);cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <button id="themeToggle" class="theme-toggle">ðŸŒ™</button>
    <h1>POAS & Scaling Calculator</h1>
    <div class="grid">
      <div class="panel">
        <h3>Inputs</h3>
        <div class="row"><div><label>CPA (lei)</label><input id="cpa" type="number" value="35"/></div><div><label>Fixed costs/day</label><input id="fixed" type="number" value="2900"/></div></div>
        <div class="row"><div><label>Daily customers</label><input id="dailyCustomers" type="number" value="100"/></div></div>
        <h4>Product Pricing (incl. VAT)</h4>
        <div class="row"><div><label>Purchase price</label><input id="purchasePrice" type="number" value="105"/></div><div><label>Selling price</label><input id="sellingPrice" type="number" value="199"/></div></div>
        <h4>Customer Split</h4>
        <div class="row"><div><label>% buy 2 pairs</label><input id="pct2" type="number" value="20"/></div><div><label>% voucher redeemers</label><input id="pctVoucher" type="number" value="30"/></div></div>
        <h4>Voucher</h4>
        <div class="row"><div><label>Voucher amount (lei)</label><input id="voucher" type="number" value="50"/></div></div>
        <button class="btn" id="calcBtn">Recalculate</button>
      </div>
      <div class="panel">
        <h3>Outputs</h3>
        <div class="kpi">
          <div class="item-block"><div class="muted">Avg profit/client (before CPA)</div><div id="avgProfitPre">â€”</div></div>
          <div class="item-block"><div class="muted">Profit/client (after CPA)</div><div id="avgProfitPost">â€”</div></div>
          <div class="item-block"><div class="muted">Profit/client (after CPA & fixed)</div><div id="avgProfitPostFixed" class="green">â€”</div></div>
          <div class="item-block"><div class="muted">POAS</div><div id="poas">â€”</div></div>
        </div>
        <h4>Per Segment</h4>
        <div class="kpi">
          <div class="item-block"><div class="muted">1-pair order</div><div id="profit1">â€”</div><div id="profit1Fixed" class="muted">â€”</div></div>
          <div class="item-block"><div class="muted">2-pair order</div><div id="profit2">â€”</div><div id="profit2Fixed" class="muted">â€”</div></div>
          <div class="item-block"><div class="muted">Voucher order (3rd pair)</div><div class="violet" id="profitVoucher">â€”</div><div id="profitVoucherFixed" class="muted">â€”</div></div>
        </div>
        <h4>Profit Projection Daily/Monthly</h4>
        <div class="kpi">
          <div class="item-block"><div class="muted">Profit with vouchers)</div><div id="profitDay" class="green">â€”</div></div>
          <div class="item-block"><div class="muted">Profit no vouchers)</div><div id="profitDayNoVoucher" class="yellow">â€”</div></div>
          <div class="item-block"><div class="muted">Total Profit/month</div><div id="profitMonth">â€”</div></div>
          <div class="item-block"><div class="muted">Break-even/day</div><div><span id="breakeven" class="red"></span> <span class="white-bold">customers/day</span></div></div>
        </div>
        <h4>Customer Breakdown (per daily customers)</h4>
        <div class="kpi">
          <div class="item-block"><div class="muted"># single-pair</div><div id="count1">â€”</div></div>
          <div class="item-block"><div class="muted"># two-pair</div><div id="count2">â€”</div></div>
          <div class="item-block"><div class="muted"># voucher redeemers</div><div id="countVoucher">â€”</div></div>
          <div class="item-block"><div class="muted">Total profit (pre CPA/fixed)</div><div id="profit100">â€”</div></div>
        </div>
        <footer>
          <strong>Explanations:</strong><br>
          <b>CPA</b> â€“ cost to acquire one new customer.<br>
          <b>Fixed costs</b> â€“ daily fixed expenses (excl. VAT).<br>
          <b>Daily customers</b> â€“ number of new customers per day.<br>
          <b>Purchase/Selling price</b> â€“ gross prices incl. VAT, converted internally to net.<br>
          <b>% buy 2 pairs</b> â€“ percentage of customers who buy 2 pairs initially.<br>
          <b>% voucher redeemers</b> â€“ percentage of 2-pair buyers who return with a voucher.<br>
          <b>Voucher amount</b> â€“ discount value applied on the 3rd pair.<br>
          <b>Avg profit/client</b> â€“ average profit per customer (before/after CPA & fixed).<br>
          <b>POAS</b> â€“ Profit Over Ad Spend (profit/CPA). >1 = profitable.<br>
          <b>Per segment</b> â€“ profit for 1-pair, 2-pair, and voucher customers.<br>
          <b>Daily Projection</b> â€“ simulation of daily and monthly profit.<br>
          <b>Customer Breakdown</b> â€“ distribution of customers per daily customers and gross total profit.<br>
          <b>Break-even/day</b> â€“ how many customers/day are needed to cover CPA + fixed costs.<br>
        </footer>
      </div>
    </div>
  </div>
  <script>
(function(){
  function num(v){return Number(v||0)}
  function fmt(v){return (Math.round(v*100)/100).toLocaleString('en-US')}

  function applyThemeInit(){
    var stored=localStorage.getItem('theme');
    var sysDark=window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    var start=stored || (sysDark? 'dark':'light');
    document.body.setAttribute('data-theme',start);
    var btn=document.getElementById('themeToggle');
    if(btn){
      btn.innerText=(start==='dark'? 'ðŸŒ™':'ðŸŒž');
      btn.onclick=function(){
        var cur=document.body.getAttribute('data-theme');
        var next=cur==='dark'?'light':'dark';
        document.body.setAttribute('data-theme',next);
        localStorage.setItem('theme',next);
        btn.innerText=(next==='dark'? 'ðŸŒ™':'ðŸŒž');
      };
    }
  }

  function recalc(){
    var cpa=num(document.getElementById('cpa').value),
        fixed=num(document.getElementById('fixed').value),
        daily=num(document.getElementById('dailyCustomers').value),
        pct2=num(document.getElementById('pct2').value)/100,
        pctVoucher=num(document.getElementById('pctVoucher').value)/100,
        voucher=num(document.getElementById('voucher').value),
        purchaseGross=num(document.getElementById('purchasePrice').value),
        sellingGross=num(document.getElementById('sellingPrice').value),
        VAT=0.21;

    var purchaseNet=purchaseGross/(1+VAT),
        sellingNet=sellingGross/(1+VAT);

    var margin1=sellingNet-purchaseNet,
        margin2=margin1*2,
        marginVoucher=(sellingNet-purchaseNet)-voucher;

    var c2=Math.round(daily*pct2);
    var c1=Math.max(0, daily - c2);
    var cVoucher=Math.round(c2*pctVoucher);

    var denom = daily>0 ? daily : 1;

    var avgPre=((c1*margin1)+(c2*margin2)+(cVoucher*marginVoucher))/denom;
    var avgPost=((c1*(margin1-cpa))+(c2*(margin2-cpa))+(cVoucher*marginVoucher))/denom;
    var avgPostNoVoucher=((c1*(margin1-cpa))+(c2*(margin2-cpa)))/denom;

    var poas=avgPre/(cpa||1);
    var profitDay=(daily*avgPost)-fixed;
    var profitDayNoVoucher=(daily*avgPostNoVoucher)-fixed;
    var profitMonth=profitDay*30;
    var breakeven=avgPost>0? Math.ceil(fixed/avgPost) : 0;

    // Averages & POAS
    var el;
    el=document.getElementById('avgProfitPre'); if(el) el.innerText=fmt(avgPre)+' lei';
    el=document.getElementById('avgProfitPost'); if(el) el.innerText=fmt(avgPost)+' lei';
    el=document.getElementById('avgProfitPostFixed'); if(el) el.innerText=fmt(avgPost-(fixed/denom))+' lei';

    el=document.getElementById('poas');
    if(el){ el.innerText=fmt(poas)+'Ã—'; el.className=(poas>3? 'blue':'yellow'); }

    // Daily projections
    el=document.getElementById('profitDay'); if(el) el.innerText=fmt(profitDay)+' lei';
    el=document.getElementById('profitDayNoVoucher'); if(el) el.innerText=fmt(profitDayNoVoucher)+' lei';
    el=document.getElementById('profitMonth'); 
    if(el){ el.innerText=fmt(profitMonth)+' lei'; el.className=(profitMonth>100000? 'green':'yellow'); }
    el=document.getElementById('breakeven'); if(el) el.innerText=fmt(breakeven);

    // Customer breakdown
    document.getElementById('count1').innerText=c1+' customers';
    document.getElementById('count2').innerText=c2+' customers';
    document.getElementById('countVoucher').innerText=cVoucher+' customers';
    document.getElementById('profit100').innerText=fmt((c1*margin1)+(c2*margin2)+(cVoucher*marginVoucher))+' lei';

    // Per segment
    document.getElementById('profit1').innerText=fmt(margin1-cpa)+' lei (after CPA)';
    document.getElementById('profit1Fixed').innerText=fmt((margin1-cpa)-(fixed/denom))+' lei (after CPA & fixed)';
    document.getElementById('profit2').innerText=fmt(margin2-cpa)+' lei (after CPA)';
    document.getElementById('profit2Fixed').innerText=fmt((margin2-cpa)-(fixed/denom))+' lei (after CPA & fixed)';
    document.getElementById('profitVoucher').innerText=fmt(marginVoucher)+' lei';
    document.getElementById('profitVoucherFixed').innerText=fmt(marginVoucher-(fixed/denom))+' lei (after fixed)';
  }

  document.addEventListener('DOMContentLoaded', function(){
    applyThemeInit();
    document.querySelectorAll('input').forEach(function(i){ i.addEventListener('input', recalc); });
    var btn=document.getElementById('calcBtn'); if(btn) btn.addEventListener('click', recalc);
    recalc();
  });
})();
</script>
</body>
</html>
